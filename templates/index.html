<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AI IDS</title>
    <!-- Externalized styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  <body>
  <h1>AI INTRUSION DETECTION â€“ LIVE</h1>
  <div class="stats">
    Attacks Detected: <span id="attack_count">0</span> | 
    IPs Blocked: <span id="blocked_count">0</span> | 
    Active IPs: <span id="active_ips">0</span>
  </div>
  <div class="alert" id="alert">Initializing...</div>
  
  <!-- Control Panel -->
  <div class="control-panel">
    <div class="sim-form">
      <h3>ğŸ¯ Simulate Real-time Attack</h3>
      <div class="last-attack" id="last_attack">No attacks yet</div>
      <button onclick="simulateRandom()" class="action-btn green">âš¡ Generate New Attack</button>
    </div>
    
    <div class="manual-block">
      <h3>ğŸ›¡ï¸ Manual Response Center</h3>
      <div class="active-threats" id="active_threats">No active threats</div>
      <input type="text" id="block_ip" placeholder="Enter IP to block" readonly>
      <button onclick="manualBlock()" class="action-btn pulse">ğŸš« Block Suspicious IP</button>
    </div>
  </div>

  <!-- styles moved to static/css/style.css -->

  <h2>Blocked IPs</h2>
  <div class="blocked-section">
    <div class="stats" id="blocked_list">(none)</div>
    <button onclick="unblockAll()" class="action-btn red">Clear All Blocks</button>
  </div>

  <h3>Recent Events</h3>
  <pre id="recent_events" style="max-height:200px;overflow:auto;background:#111;padding:10px;border-radius:6px;color:#f88"></pre>

  <!-- Attack Simulation Modal -->
  <div id="attack_modal" class="modal">
    <div class="modal-content">
      <h2>ğŸš¨ SIMULATING ATTACK</h2>
      <div class="attack-grid">
        <div class="attack-map" id="attack_map">
          <div class="map-container">
            <div class="map-marker source" id="attack_source"></div>
            <div class="map-marker target" id="attack_target"></div>
            <div class="attack-line" id="attack_line"></div>
          </div>
        </div>
        <div class="matrix-animation" id="matrix_code"></div>
        <div class="packet-visualization" id="packet_vis"></div>
      </div>
      <div class="attack-status" id="attack_status">Initializing attack simulation...</div>
      <div class="attack-details" id="attack_details"></div>
    </div>
  </div>

  <!-- more styles moved to static/css/style.css -->

  <!-- externalized script -->
  <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
  </body>
</html>